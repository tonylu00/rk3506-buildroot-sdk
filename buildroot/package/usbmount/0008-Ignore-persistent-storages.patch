From 134850e719c616b003880a8033ee0d0e5b9504b3 Mon Sep 17 00:00:00 2001
From: Jeffy Chen <jeffy.chen@rock-chips.com>
Date: Tue, 27 Aug 2024 16:00:44 +0800
Subject: [PATCH 8/8] Ignore persistent storages

For example UFS.

Signed-off-by: Jeffy Chen <jeffy.chen@rock-chips.com>
---
 usbmount.rules | 1 +
 1 file changed, 1 insertion(+)

diff --git a/usbmount.rules b/usbmount.rules
index db943dd..afac12d 100644
--- a/usbmount.rules
+++ b/usbmount.rules
@@ -5,6 +5,7 @@ ACTION=="remove", RUN+="/usr/share/usbmount/usbmount remove"
 
 ACTION!="add", GOTO="usbmount_end"
 ENV{ID_FS_TYPE}=="", GOTO="usbmount_end"
+ATTRS{removable}!="1", GOTO="usbmount_end"
 
 KERNEL=="mmcblk*", ATTRS{type}=="SD", RUN+="/usr/share/usbmount/usbmount add sd"
 KERNEL=="sd*", RUN+="/usr/share/usbmount/usbmount add usb"
-- 
2.20.1

